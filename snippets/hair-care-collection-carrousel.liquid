{{ 'component-card.css' | asset_url | stylesheet_tag }}
{{ 'component-price.css' | asset_url | stylesheet_tag }}

{{ 'component-slider.css' | asset_url | stylesheet_tag }}
{{ 'template-collection.css' | asset_url | stylesheet_tag }}

{%- liquid
  assign hair_care_accessories_collection = collections['hair-extension-care-accessories']
  assign products_to_show = 8
  assign products_to_display = hair_care_accessories_collection.all_products_count

  if hair_care_accessories_collection.all_products_count > products_to_show
    assign products_to_display = products_to_show
  endif

  assign columns_mobile_int = 2 | plus: 0
  assign show_mobile_slider = false
  if products_to_display > columns_mobile_int
    assign show_mobile_slider = true
  endif

  assign columns_desktop_int = 2 | plus: 0
  assign show_desktop_slider = false
  if products_to_display > columns_desktop_int
    assign show_desktop_slider = true
  endif
-%}

<style>
  .section-featured-collection .product-grid {
    margin-bottom: 0;
  }

  .section-featured-collection .grid__item {
    min-width: 165px;
  }

  .section-featured-collection .card__information,
  .section-featured-collection .card-information {
    text-align: left;
  }

  .section-featured-collection .card__information {
    padding-bottom: 0;
  }

  .section-featured-collection button.button {
    width: fit-content;
    min-width: 0;
    min-height: 0;
    padding: 1rem 2.5rem;
    max-width: 100%;
  }

  @media screen and (min-width: 990px) {
    .section-featured-collection .slider--desktop .slider__slide:first-child {
      margin-left: 0;
      scroll-margin-left: 0;
    }
  }

  /* slider buttons */
  .section-featured-collection .slider-buttons > .slider-button {
    background: var(--gradient-background);
    border-radius: 50%;
    position: absolute;
    top: calc(50% - 22px);
    right: 1.5rem;
    border: 1px solid rgba(var(--color-foreground), 0.1);
  }

  .section-featured-collection .slider-buttons > .slider-button--prev {
    left: 1.5rem;
  }

  .section-featured-collection .slider-buttons > .slider-button--next {
    right: 1.5rem;
  }

  .section-featured-collection .slider-buttons > .slider-button .icon {
    height: 1.2rem;
  }

  @media screen and (max-width: 749px) {
    .section-featured-collection .grid--peek.slider .grid__item:first-of-type {
      margin-left: 0;
    }
  }
</style>

<div class="isolate gradient section-featured-collection">
  <div class="collection collection--full-width">
    <div class="collection__title title-wrapper title-wrapper--no-top-margin {% if show_mobile_slider %} title-wrapper--self-padded-tablet-down{% endif %}{% if show_desktop_slider %} collection__title--desktop-slider{% endif %}">
      <p class="title inline-richtext h3 center">Haircare & Accessories Essentials</p>
    </div>

    <slider-component class="slider-mobile-gutter slider-component-full-width{% if show_desktop_slider %} slider-component-desktop{% endif %}">
      <ul
        id="Slider-quiz-answer-footer"
        class="grid product-grid contains-card contains-card--product{% if settings.card_style == 'standard' %} contains-card--standard{% endif %} grid--{{ columns_desktop_int }}-col-desktop grid--{{ columns_mobile_int }}-col-tablet-down{% if show_mobile_slider or show_desktop_slider %} slider{% if show_desktop_slider %} slider--desktop{% endif %}{% if show_mobile_slider %} slider--tablet grid--peek{% endif %}{% endif %}"
        role="list"
        aria-label="{{ 'general.slider.name' | t }}"
      >
        {%- for product in hair_care_accessories_collection.products limit: products_to_show -%}
          <li
            id="Slide-quiz-answer-footer-{{ forloop.index }}"
            class="grid__item{% if show_mobile_slider or show_desktop_slider %} slider__slide{% endif %}"
          >
            {%
              render 'card-product-v2',
              card_product: product,
              media_aspect_ratio: 'square',
              image_shape: "default",
              show_secondary_image: false,
              show_vendor: false,
              show_rating: false,
              show_quick_add: false,
              section_id: "quiz-answer-footer",
              colour_as_title: false,
              show_type: false,
              badge_style: "fixed",
              display_low_inventory: true,
              low_inventory: 5 | times: 1
            %}
          </li>
        {%- endfor -%}
      </ul>
      {%- if show_mobile_slider or show_desktop_slider -%}
        <div class="slider-buttons no-js-hidden small-hide">
          <button
            type="button"
            class="slider-button slider-button--prev"
            name="previous"
            aria-label="{{ 'general.slider.previous_slide' | t }}"
            aria-controls="Slider-quiz-answer-footer"
          >
            {% render 'icon-caret' %}
          </button>
          <div class="slider-counter caption visually-hidden">
            <span class="slider-counter--current">1</span>
            <span aria-hidden="true"> / </span>
            <span class="visually-hidden">{{ 'general.slider.of' | t }}</span>
            <span class="slider-counter--total">{{ products_to_display }}</span>
          </div>
          <button
            type="button"
            class="slider-button slider-button--next"
            name="next"
            aria-label="{{ 'general.slider.next_slide' | t }}"
            aria-controls="Slider-quiz-answer-footer"
          >
            {% render 'icon-caret' %}
          </button>
        </div>
      {%- endif -%}
    </slider-component>
  </div>
</div>
